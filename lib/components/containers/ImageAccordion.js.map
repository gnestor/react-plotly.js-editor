{"version":3,"sources":["../../../src/components/containers/ImageAccordion.js"],"names":["ImageFold","ImageAccordion","context","layout","images","props","canAdd","children","_","localize","content","length","map","img","i","text","addAction","label","handler","updateContainer","imageIndex","Array","isArray","key","value","sizex","sizey","x","y","contextTypes","object","propTypes","node","bool","func"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAMA,YAAY,8CAAlB;;IAEMC,c;;;;;;;;;;;6BACK;AAAA,kCACyB,KAAKC,OAD9B,CACAC,MADA,CACSC,MADT;AAAA,UACSA,MADT,yCACkB,EADlB;AAAA,mBAEiC,KAAKC,KAFtC;AAAA,UAEAC,MAFA,UAEAA,MAFA;AAAA,UAEQC,QAFR,UAEQA,QAFR;AAAA,UAE4BC,CAF5B,UAEkBC,QAFlB;;;AAIP,UAAMC,UACJN,OAAOO,MAAP,IACAP,OAAOQ,GAAP,CAAW,UAACC,GAAD,EAAMC,CAAN;AAAA,eACT;AAAC,mBAAD;AAAA,YAAW,KAAKA,CAAhB,EAAmB,YAAYA,CAA/B,EAAkC,MAAMD,IAAIE,IAA5C,EAAkD,WAAWT,MAA7D;AACGC;AADH,SADS;AAAA,OAAX,CAFF;;AAQA,UAAMS,YAAY;AAChBC,eAAOT,EAAE,OAAF,CADS;AAEhBU,iBAAS,uBAA+B;AAAA,cAA7Bf,MAA6B,QAA7BA,MAA6B;AAAA,cAArBgB,eAAqB,QAArBA,eAAqB;;AACtC,cAAIC,mBAAJ;AACA,cAAIC,MAAMC,OAAN,CAAcnB,OAAOC,MAArB,CAAJ,EAAkC;AAChCgB,yBAAajB,OAAOC,MAAP,CAAcO,MAA3B;AACD,WAFD,MAEO;AACLS,yBAAa,CAAb;AACD;;AAED,cAAMG,kBAAgBH,UAAhB,MAAN;AACA,cAAMI,QAAQ;AACZT,kBAASP,EAAE,OAAF,CAAT,SAAuBY,UADX;AAEZK,mBAAO,GAFK;AAGZC,mBAAO,GAHK;AAIZC,eAAG,GAJS;AAKZC,eAAG;AALS,WAAd;;AAQA,cAAIT,eAAJ,EAAqB;AACnBA,gDAAkBI,GAAlB,EAAwBC,KAAxB;AACD;AACF;AAtBe,OAAlB;;AAyBA,aACE;AAAA;AAAA,UAAoB,WAAWlB,SAASU,SAAT,GAAqB,IAApD;AACGN,kBAAUA,OAAV,GAAoB;AADvB,OADF;AAKD;;;;;;AAGHT,eAAe4B,YAAf,GAA8B;AAC5B1B,UAAQ,oBAAU2B;AADU,CAA9B;;AAIA7B,eAAe8B,SAAf,GAA2B;AACzBxB,YAAU,oBAAUyB,IADK;AAEzB1B,UAAQ,oBAAU2B,IAFO;AAGzBxB,YAAU,oBAAUyB;AAHK,CAA3B;;kBAMe,mBAASjC,cAAT,C","file":"ImageAccordion.js","sourcesContent":["import Fold from './Fold';\nimport TraceRequiredPanel from './TraceRequiredPanel';\nimport PropTypes from 'prop-types';\nimport React, {Component} from 'react';\nimport {connectImageToLayout, localize} from 'lib';\n\nconst ImageFold = connectImageToLayout(Fold);\n\nclass ImageAccordion extends Component {\n  render() {\n    const {layout: {images = []}} = this.context;\n    const {canAdd, children, localize: _} = this.props;\n\n    const content =\n      images.length &&\n      images.map((img, i) => (\n        <ImageFold key={i} imageIndex={i} name={img.text} canDelete={canAdd}>\n          {children}\n        </ImageFold>\n      ));\n\n    const addAction = {\n      label: _('Image'),\n      handler: ({layout, updateContainer}) => {\n        let imageIndex;\n        if (Array.isArray(layout.images)) {\n          imageIndex = layout.images.length;\n        } else {\n          imageIndex = 0;\n        }\n\n        const key = `images[${imageIndex}]`;\n        const value = {\n          text: `${_('Image')} ${imageIndex}`,\n          sizex: 0.1,\n          sizey: 0.1,\n          x: 0.5,\n          y: 0.5,\n        };\n\n        if (updateContainer) {\n          updateContainer({[key]: value});\n        }\n      },\n    };\n\n    return (\n      <TraceRequiredPanel addAction={canAdd ? addAction : null}>\n        {content ? content : null}\n      </TraceRequiredPanel>\n    );\n  }\n}\n\nImageAccordion.contextTypes = {\n  layout: PropTypes.object,\n};\n\nImageAccordion.propTypes = {\n  children: PropTypes.node,\n  canAdd: PropTypes.bool,\n  localize: PropTypes.func,\n};\n\nexport default localize(ImageAccordion);\n"]}