{"version":3,"sources":["../../../src/components/containers/AnnotationAccordion.js"],"names":["AnnotationFold","AnnotationAccordion","context","layout","annotations","props","canAdd","children","_","localize","content","length","map","ann","i","text","addAction","label","handler","updateContainer","annotationIndex","Array","isArray","key","value","contextTypes","object","propTypes","node","bool","func"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAMA,iBAAiB,mDAAvB;;IAEMC,mB;;;;;;;;;;;6BACK;AAAA,kCAC8B,KAAKC,OADnC,CACAC,MADA,CACSC,WADT;AAAA,UACSA,WADT,yCACuB,EADvB;AAAA,mBAEiC,KAAKC,KAFtC;AAAA,UAEAC,MAFA,UAEAA,MAFA;AAAA,UAEQC,QAFR,UAEQA,QAFR;AAAA,UAE4BC,CAF5B,UAEkBC,QAFlB;;;AAIP,UAAMC,UACJN,YAAYO,MAAZ,IACAP,YAAYQ,GAAZ,CAAgB,UAACC,GAAD,EAAMC,CAAN;AAAA,eACd;AAAC,wBAAD;AAAA;AACE,iBAAKA,CADP;AAEE,6BAAiBA,CAFnB;AAGE,kBAAMD,IAAIE,IAHZ;AAIE,uBAAWT;AAJb;AAMGC;AANH,SADc;AAAA,OAAhB,CAFF;;AAaA,UAAMS,YAAY;AAChBC,eAAOT,EAAE,YAAF,CADS;AAEhBU,iBAAS,uBAA+B;AAAA,cAA7Bf,MAA6B,QAA7BA,MAA6B;AAAA,cAArBgB,eAAqB,QAArBA,eAAqB;;AACtC,cAAIC,wBAAJ;AACA,cAAIC,MAAMC,OAAN,CAAcnB,OAAOC,WAArB,CAAJ,EAAuC;AACrCgB,8BAAkBjB,OAAOC,WAAP,CAAmBO,MAArC;AACD,WAFD,MAEO;AACLS,8BAAkB,CAAlB;AACD;;AAED,cAAMG,uBAAqBH,eAArB,MAAN;AACA,cAAMI,QAAQ,EAACT,MAAMP,EAAE,UAAF,CAAP,EAAd;;AAEA,cAAIW,eAAJ,EAAqB;AACnBA,gDAAkBI,GAAlB,EAAwBC,KAAxB;AACD;AACF;AAhBe,OAAlB;;AAmBA,aACE;AAAA;AAAA,UAAoB,WAAWlB,SAASU,SAAT,GAAqB,IAApD;AACGN,kBAAUA,OAAV,GAAoB;AADvB,OADF;AAKD;;;;;;AAGHT,oBAAoBwB,YAApB,GAAmC;AACjCtB,UAAQ,oBAAUuB;AADe,CAAnC;;AAIAzB,oBAAoB0B,SAApB,GAAgC;AAC9BpB,YAAU,oBAAUqB,IADU;AAE9BtB,UAAQ,oBAAUuB,IAFY;AAG9BpB,YAAU,oBAAUqB;AAHU,CAAhC;;kBAMe,mBAAS7B,mBAAT,C","file":"AnnotationAccordion.js","sourcesContent":["import Fold from './Fold';\nimport TraceRequiredPanel from './TraceRequiredPanel';\nimport PropTypes from 'prop-types';\nimport React, {Component} from 'react';\nimport {connectAnnotationToLayout, localize} from 'lib';\n\nconst AnnotationFold = connectAnnotationToLayout(Fold);\n\nclass AnnotationAccordion extends Component {\n  render() {\n    const {layout: {annotations = []}} = this.context;\n    const {canAdd, children, localize: _} = this.props;\n\n    const content =\n      annotations.length &&\n      annotations.map((ann, i) => (\n        <AnnotationFold\n          key={i}\n          annotationIndex={i}\n          name={ann.text}\n          canDelete={canAdd}\n        >\n          {children}\n        </AnnotationFold>\n      ));\n\n    const addAction = {\n      label: _('Annotation'),\n      handler: ({layout, updateContainer}) => {\n        let annotationIndex;\n        if (Array.isArray(layout.annotations)) {\n          annotationIndex = layout.annotations.length;\n        } else {\n          annotationIndex = 0;\n        }\n\n        const key = `annotations[${annotationIndex}]`;\n        const value = {text: _('new text')};\n\n        if (updateContainer) {\n          updateContainer({[key]: value});\n        }\n      },\n    };\n\n    return (\n      <TraceRequiredPanel addAction={canAdd ? addAction : null}>\n        {content ? content : null}\n      </TraceRequiredPanel>\n    );\n  }\n}\n\nAnnotationAccordion.contextTypes = {\n  layout: PropTypes.object,\n};\n\nAnnotationAccordion.propTypes = {\n  children: PropTypes.node,\n  canAdd: PropTypes.bool,\n  localize: PropTypes.func,\n};\n\nexport default localize(AnnotationAccordion);\n"]}